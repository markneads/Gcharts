<!DOCTYPE html>
<html>
<head>
<title>Google Chart Example</title>
<script src="https://www.google.com/jsapi"></script>
<script src="http://code.jquery.com/jquery-1.10.1.min.js"></script>
<script src="jquery.csv-0.71.js"></script>
    <script>


        var GET = {};
        var query = window.location.search.substring(1).split("&");
        for (var i = 0, max = query.length; i < max; i++)
        {
            if (query[i] === "") // check for trailing & with no param
                continue;

            var param = query[i].split("=");
            GET[decodeURIComponent(param[0])] = decodeURIComponent(param[1] || "");
        }

        // load the visualization library from Google and set a listener
        google.load("visualization", "1", {packages:["corechart"]});
        google.setOnLoadCallback(drawChart);

        function drawChart() {
            // grab the CSV
            $.get(param[1], function(csvString) {

                // transform the CSV string into a 2-dimensional array
                var arrayData = $.csv.toArrays(csvString, {onParseValue: $.csv.hooks.castToScalar});
                // this new DataTable object holds all the data
                var data = new google.visualization.arrayToDataTable(arrayData);
                // this view can select a subset of the data at a time

                var view = new google.visualization.DataView(data);

                view.setColumns([0,1,2,3]);
/*                var dateFormatter = new google.visualization.DateFormat({pattern: 'dd-MM-yy HH:mm:ss'});
                view.setColumns([{
                    type: 'datetime',
                    calc: function (data, row) {
                        var dateMatch = data.getValue(row, 0).match(/(\d{2})-(\d{2})-(\d{2})/);
                        var timeMatch = data.getValue(row, 1).match(/(\d{2}):(\d{2}):(\d{2})/);
                        var year = 2000 + dateMatch[3];
                        var month = parseInt(dateMatch[2], 10) - 1; // subtract 1 to convert to javascript's zero-indexed months
                        var day = parseInt(dateMatch[1], 10);
                        var hours = parseInt(timeMatch[1], 10);
                        var minutes = parseInt(timeMatch[2], 10);
                        var seconds = parseInt(timeMatch[3], 10);
                        var dateTime = new Date(year, month, day, hours, minutes, seconds);
                        return {v: dateTime, f: dateFormatter.formatValue(dateTime)};
                    }
                },2,3]);*/

                var options = {
                    title: "Busy Engines",
                    hAxis: {title: data.getColumnLabel(0), minValue: data.getColumnRange(0).min, maxValue: data.getColumnRange(0).max},
                    vAxis: {title: "Engines", minValue: data.getColumnRange(1).min, maxValue: data.getColumnRange(1).max},
                    legend:{position: 'bottom', textStyle: {color: 'blue', fontSize: 16}},
                    isStacked: true


                };
                var chart = new google.visualization.AreaChart(document.getElementById('chart'));
                chart.draw(view, options);
            });
        }
    </script>
</head>
<body>

<div id="chart" style="width: 1400px; height: 800px;"></div>
</body>
</html>